{"version":3,"file":"index.cjs.js","sources":["../../../dist-es5/links/src/AwaitVariablesLink.js","../../../dist-es5/links/src/createServerHttpLink.js","../../../dist-es5/links/src/linkToExecutor.js","../../../dist-es5/links/src/linkToSubscriber.js","../../../dist-es5/links/src/GraphQLUpload.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport { ApolloLink } from '@apollo/client/link/core';\nimport { Observable } from '@apollo/client/utilities';\nfunction getFinalPromise(object) {\n    return Promise.resolve(object).then(function (resolvedObject) {\n        if (resolvedObject == null) {\n            return resolvedObject;\n        }\n        if (Array.isArray(resolvedObject)) {\n            return Promise.all(resolvedObject.map(function (o) { return getFinalPromise(o); }));\n        }\n        else if (typeof resolvedObject === 'object') {\n            var keys_1 = Object.keys(resolvedObject);\n            return Promise.all(keys_1.map(function (key) { return getFinalPromise(resolvedObject[key]); })).then(function (awaitedValues) {\n                for (var i = 0; i < keys_1.length; i++) {\n                    resolvedObject[keys_1[i]] = awaitedValues[i];\n                }\n                return resolvedObject;\n            });\n        }\n        return resolvedObject;\n    });\n}\nvar AwaitVariablesLink = /** @class */ (function (_super) {\n    __extends(AwaitVariablesLink, _super);\n    function AwaitVariablesLink() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AwaitVariablesLink.prototype.request = function (operation, forward) {\n        return new Observable(function (observer) {\n            var subscription;\n            getFinalPromise(operation.variables)\n                .then(function (resolvedVariables) {\n                operation.variables = resolvedVariables;\n                subscription = forward(operation).subscribe({\n                    next: observer.next.bind(observer),\n                    error: observer.error.bind(observer),\n                    complete: observer.complete.bind(observer),\n                });\n            })\n                .catch(observer.error.bind(observer));\n            return function () {\n                if (subscription != null) {\n                    subscription.unsubscribe();\n                }\n            };\n        });\n    };\n    return AwaitVariablesLink;\n}(ApolloLink));\nexport { AwaitVariablesLink };\n//# sourceMappingURL=AwaitVariablesLink.js.map","import { __assign } from \"tslib\";\nimport { concat } from '@apollo/client/link/core';\nimport { createUploadLink, formDataAppendFile, isExtractableFile } from 'apollo-upload-client';\nimport FormData from 'form-data';\nimport { fetch } from 'cross-fetch';\nimport { AwaitVariablesLink } from './AwaitVariablesLink';\nexport var createServerHttpLink = function (options) {\n    return concat(new AwaitVariablesLink(), createUploadLink(__assign(__assign({}, options), { fetch: fetch,\n        FormData: FormData, isExtractableFile: function (value) { return isExtractableFile(value) || (value === null || value === void 0 ? void 0 : value.createReadStream); }, formDataAppendFile: function (form, index, file) {\n            if (file.createReadStream != null) {\n                form.append(index, file.createReadStream(), {\n                    filename: file.filename,\n                    contentType: file.mimetype,\n                });\n            }\n            else {\n                formDataAppendFile(form, index, file);\n            }\n        } })));\n};\n//# sourceMappingURL=createServerHttpLink.js.map","import { execute } from '@apollo/client/link/core';\nimport { toPromise } from '@apollo/client/link/utils';\nexport var linkToExecutor = function (link) { return function (params) {\n    var document = params.document, variables = params.variables, extensions = params.extensions, context = params.context, info = params.info;\n    return toPromise(execute(link, {\n        query: document,\n        variables: variables,\n        context: {\n            graphqlContext: context,\n            graphqlResolveInfo: info,\n            clientAwareness: {},\n        },\n        extensions: extensions,\n    }));\n}; };\n//# sourceMappingURL=linkToExecutor.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { execute } from '@apollo/client/link/core';\nimport { observableToAsyncIterable } from '@graphql-tools/utils';\nexport var linkToSubscriber = function (link) { return function (params) { return __awaiter(void 0, void 0, void 0, function () {\n    var document, variables, extensions, context, info;\n    return __generator(this, function (_a) {\n        document = params.document, variables = params.variables, extensions = params.extensions, context = params.context, info = params.info;\n        return [2 /*return*/, observableToAsyncIterable(execute(link, {\n                query: document,\n                variables: variables,\n                context: {\n                    graphqlContext: context,\n                    graphqlResolveInfo: info,\n                    clientAwareness: {},\n                },\n                extensions: extensions,\n            }))[Symbol.asyncIterator]()];\n    });\n}); }; };\n//# sourceMappingURL=linkToSubscriber.js.map","import { GraphQLScalarType, GraphQLError } from 'graphql';\nimport isPromise from 'is-promise';\nvar GraphQLUpload = new GraphQLScalarType({\n    name: 'Upload',\n    description: 'The `Upload` scalar type represents a file upload.',\n    parseValue: function (value) {\n        if (value != null && isPromise(value.promise)) {\n            // graphql-upload v10\n            return value.promise;\n        }\n        else if (isPromise(value)) {\n            // graphql-upload v9\n            return value;\n        }\n        throw new GraphQLError('Upload value invalid.');\n    },\n    // serialization requires to support schema stitching\n    serialize: function (value) { return value; },\n    parseLiteral: function (ast) {\n        throw new GraphQLError('Upload literal unsupported.', ast);\n    },\n});\nexport { GraphQLUpload };\n//# sourceMappingURL=GraphQLUpload.js.map"],"names":["__extends","Observable","ApolloLink","concat","createUploadLink","__assign","fetch","isExtractableFile","formDataAppendFile","toPromise","execute","__awaiter","__generator","observableToAsyncIterable","GraphQLScalarType","GraphQLError"],"mappings":"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"}