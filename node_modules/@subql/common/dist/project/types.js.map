{"version":3,"file":"types.js","sourceRoot":"","sources":["../../src/project/types.ts"],"names":[],"mappings":";AAAA,gEAAgE;AAChE,sCAAsC","sourcesContent":["// Copyright 2020-2021 OnFinality Limited authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport {RegistryTypes} from '@polkadot/types/types';\nimport {SubqlKind} from './constants';\n\nexport interface ProjectManifest {\n  specVersion: string;\n  description: string;\n  repository: string;\n\n  schema: string;\n\n  network: {\n    endpoint: string;\n    customTypes?: RegistryTypes;\n  };\n\n  dataSources: SubqlDataSource[];\n}\n\n// [startSpecVersion?, endSpecVersion?] closed range\nexport type SpecVersionRange = [number, number];\n\ninterface SubqlBaseHandlerFilter {\n  specVersion?: SpecVersionRange;\n}\n\nexport type SubqlBlockFilter = SubqlBaseHandlerFilter;\n\nexport interface SubqlEventFilter extends SubqlBaseHandlerFilter {\n  module?: string;\n  method?: string;\n}\n\nexport interface SubqlCallFilter extends SubqlEventFilter {\n  success?: boolean;\n}\n\nexport interface SubqlBlockHandler {\n  handler: string;\n  kind: 'substrate/BlockHandler';\n  filter?: SubqlBlockFilter;\n}\n\nexport interface SubqlCallHandler {\n  handler: string;\n  kind: 'substrate/CallHandler';\n  filter?: SubqlCallFilter;\n}\n\nexport interface SubqlEventHandler {\n  handler: string;\n  kind: 'substrate/EventHandler';\n  filter?: SubqlEventFilter;\n}\n\nexport type SubqlHandler = SubqlBlockHandler | SubqlCallHandler | SubqlEventHandler;\n\nexport type SubqlHandlerFilter = SubqlBlockFilter | SubqlCallFilter | SubqlEventFilter;\n\nexport interface SubqlMapping {\n  handlers: SubqlHandler[];\n}\n\nexport interface SubqlDatasource {\n  name: string;\n  kind: SubqlKind;\n  filter?: SubqlNetworkFilter;\n  startBlock?: number;\n  mapping: SubqlMapping;\n}\n\nexport interface SubqlRuntimeDatasource extends SubqlDatasource {\n  kind: SubqlKind.Runtime;\n}\n\nexport interface SubqlNetworkFilter {\n  specName: String;\n}\n\nexport type SubqlDataSource = SubqlRuntimeDatasource;\n"]}