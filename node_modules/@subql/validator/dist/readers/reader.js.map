{"version":3,"file":"reader.js","sourceRoot":"","sources":["../../src/readers/reader.ts"],"names":[],"mappings":";AAAA,gEAAgE;AAChE,sCAAsC;;;;;;;;;;;;;;;;;;;;;;AAEtC,uCAAyB;AAEzB,mDAA6C;AAC7C,iDAA2C;AAO3C,MAAa,aAAa;IACxB,MAAM,CAAC,MAAM,CAAC,QAAgB;QAC5B,iEAAiE;QACjE,MAAM,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC,2CAA2C,CAAC,CAAC;QAChF,IAAI,WAAW,EAAE;YACf,OAAO,IAAI,4BAAY,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;SACzC;QAED,MAAM,KAAK,GAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACpC,IAAI,KAAK,CAAC,WAAW,EAAE,EAAE;YACvB,OAAO,IAAI,0BAAW,CAAC,QAAQ,CAAC,CAAC;SAClC;QAED,MAAM,IAAI,KAAK,CAAC,qBAAqB,QAAQ,EAAE,CAAC,CAAC;IACnD,CAAC;CACF;AAfD,sCAeC","sourcesContent":["// Copyright 2020-2021 OnFinality Limited authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as fs from 'fs';\nimport {IPackageJson} from 'package-json-type';\nimport {GithubReader} from './github-reader';\nimport {LocalReader} from './local-reader';\n\nexport interface Reader {\n  getProjectSchema(): Promise<unknown | undefined>;\n  getPkg(): Promise<IPackageJson | undefined>;\n}\n\nexport class ReaderFactory {\n  static create(location: string): Reader {\n    // eslint-disable-next-line @typescript-eslint/prefer-regexp-exec\n    const githubMatch = location.match(/https:\\/\\/github.com\\/([\\w-_]+\\/[\\w-_]+)/i);\n    if (githubMatch) {\n      return new GithubReader(githubMatch[1]);\n    }\n\n    const stats = fs.statSync(location);\n    if (stats.isDirectory()) {\n      return new LocalReader(location);\n    }\n\n    throw new Error(`unknown location: ${location}`);\n  }\n}\n"]}