{"version":3,"file":"build.js","sourceRoot":"","sources":["../../src/commands/build.ts"],"names":[],"mappings":";AAAA,gEAAgE;AAChE,sCAAsC;;;AAEtC,0EAAkC;AAClC,4CAA8C;AAE9C,MAAqB,KAAM,SAAQ,iBAAO;IAQxC,KAAK,CAAC,GAAG;QACP,eAAe;QACf,IAAI,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;QAC9C,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACpC,uBAAK,CAAC,IAAI,CAAC,mCAAmC,EAAE,CAAC,KAA0B,EAAE,MAAc,EAAE,MAAc,EAAE,EAAE;gBAC7G,IAAI,KAAK,EAAE;oBACT,MAAM,CAAC,KAAK,CAAC,CAAC;oBACd,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;iBAClB;qBAAM;oBACL,OAAO,CAAC,MAAM,CAAC,CAAC;oBAChB,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;iBAC/B;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;;AAtBH,wBAuBC;AAtBQ,iBAAW,GAAG,4BAA4B,CAAC;AAE3C,WAAK,GAAG;IACb,KAAK,EAAE,eAAK,CAAC,OAAO,CAAC,EAAC,IAAI,EAAE,GAAG,EAAC,CAAC;IACjC,IAAI,EAAE,eAAK,CAAC,MAAM,EAAE;CACrB,CAAC","sourcesContent":["// Copyright 2020-2021 OnFinality Limited authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport child from 'child_process';\nimport {Command, flags} from '@oclif/command';\n\nexport default class Build extends Command {\n  static description = 'Pack this SubQuery project';\n\n  static flags = {\n    force: flags.boolean({char: 'f'}),\n    file: flags.string(),\n  };\n\n  async run(): Promise<void> {\n    // run npm pack\n    this.log('Packing your SubQuery Project ...');\n    await new Promise((resolve, reject) => {\n      child.exec(`rm -rf dist && tsc -b && npm pack`, (error: child.ExecException, stdout: string, stderr: string) => {\n        if (error) {\n          reject(error);\n          this.log(stderr);\n        } else {\n          resolve(stdout);\n          this.log('Finished packing!');\n        }\n      });\n    });\n  }\n}\n"]}