"use strict";
// Copyright 2020-2021 OnFinality Limited authors & contributors
// SPDX-License-Identifier: Apache-2.0
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const child_process_1 = tslib_1.__importDefault(require("child_process"));
const command_1 = require("@oclif/command");
class Build extends command_1.Command {
    async run() {
        // run npm pack
        this.log('Packing your SubQuery Project ...');
        await new Promise((resolve, reject) => {
            child_process_1.default.exec(`rm -rf dist && tsc -b && npm pack`, (error, stdout, stderr) => {
                if (error) {
                    reject(error);
                    this.log(stderr);
                }
                else {
                    resolve(stdout);
                    this.log('Finished packing!');
                }
            });
        });
    }
}
exports.default = Build;
Build.description = 'Pack this SubQuery project';
Build.flags = {
    force: command_1.flags.boolean({ char: 'f' }),
    file: command_1.flags.string(),
};
//# sourceMappingURL=build.js.map